spring:
  datasource:
    # 注意：库名包含"+"需 URL 编码；dianping+AI 应写作 dianping%2BAI
    url: jdbc:mysql://localhost:3306/dianping_ai?useSSL=false&serverTimezone=UTC&useUnicode=true&characterEncoding=UTF-8
    username: root
    password: 123456  
    driver-class-name: com.mysql.cj.jdbc.Driver
  # MyBatis 配置（由 Spring Boot 自动配置）
  mybatis:
    # XML 映射文件路径（数组格式，使用 classpath*: 搜索所有类路径）
    # 注意：Spring Boot 会自动将 mapper-locations 绑定到 mapperLocations 属性
    mapper-locations: classpath:mapper/*.xml
    # 类型别名包路径
    type-aliases-package: com.demo.dp.domain.entity
    # MyBatis 核心配置
    configuration:
      # 开启驼峰命名转换（数据库下划线 -> Java 驼峰）
      map-underscore-to-camel-case: true

  autoconfigure:  # 排除安全配置（Spring Security关闭默认用户）
      exclude:
        - org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration

# 日志配置
logging:
  level:
    # MyBatis SQL日志：DEBUG（显示SQL语句和执行结果）
    # 注意：MyBatis使用slf4j时，需要设置mapper接口的包路径为DEBUG才能显示SQL
    com.demo.dp.mapper: DEBUG
    # 关闭条件评估报告的详细输出（设置为WARN，避免输出CONDITIONS EVALUATION REPORT）
    org.springframework.boot.autoconfigure: WARN

server:
  port: 8080

# JWT 配置占位，后续可在 JwtUtil 使用
jwt:
  # 使用 Base64 编码的密钥，至少 32 字节（256 bit）解码长度
  # 示例值对应原文 "very-strong-secret-key-32bytes!!"
  secret: "dmVyeS1zdHJvbmctc2VjcmV0LWtleS0zMmJ5dGVzISE="
  expiration-seconds: 21600

# AI 调用配置
# 说明：
# - 如果仍想使用本地 mock：保持 provider=mock 即可
# - 如果要使用通义千问（你当前的情况）：
#     1）在系统环境变量中配置 DASHSCOPE_API_KEY（你已经配置好了）
#     2）将 provider 改为 qwen
#     3）endpoint 使用通义千问的 compatible-mode 接口
#     4）api-key 可以留空，代码会自动从 DASHSCOPE_API_KEY 读取
ai:
  provider: qwen
  endpoint: "https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions"
  api-key: ""                 # 留空 -> 从环境变量 DASHSCOPE_API_KEY 读取
  model: "qwen3-max"          # 你的模型代号
  timeout-ms: 8000            # 读取超时

