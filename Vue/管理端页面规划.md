# Vue 管理端页面规划

## 📋 页面清单总览

根据后端提供的 API 接口，Vue 管理端应包含以下页面：

---

## 🔐 1. 认证相关页面

### 1.1 登录页面 (`/login`)
- **路径**: `src/views/auth/Login.vue`
- **功能**: 
  - 管理员登录（手机号/邮箱 + 密码）
  - 调用 `POST /api/users/login`
  - 登录成功后保存 JWT token，跳转到仪表盘
- **必需**: ✅

---

## 📊 2. 仪表盘（Dashboard）

### 2.1 数据概览页 (`/dashboard`)
- **路径**: `src/views/dashboard/Index.vue`
- **功能**: 
  - 展示核心数据统计：
    - 商家总数（正常/下线）
    - 点评总数
    - 订单总数
    - AI 调用次数（成功/失败）
    - 今日新增数据
  - 数据趋势图表（可选）
- **API 调用**: 
  - `GET /api/shops` (统计总数)
  - `GET /api/shops/{shopId}/reviews` (统计点评)
  - `GET /api/shops/{shopId}/orders` (统计订单)
  - AI 调用日志统计（如果有查询接口）
- **必需**: ✅

---

## 🏪 3. 商家管理模块

### 3.1 商家列表页 (`/shops`)
- **路径**: `src/views/shops/List.vue`
- **功能**: 
  - 商家列表展示（表格形式）
  - 支持分页
  - 搜索功能（关键词搜索）
  - 筛选功能：
    - 按分类筛选（category）
    - 按评分筛选（minScore）
    - 按价格筛选（maxPrice）
    - 按状态筛选（status: 1正常/0下线）
  - 操作按钮：
    - 查看详情
    - 编辑
    - 删除（软删除）
    - 管理标签
- **API 调用**: `GET /api/shops?page=0&size=10&category=...&keyword=...&minScore=...&maxPrice=...`
- **必需**: ✅

### 3.2 商家详情页 (`/shops/:id`)
- **路径**: `src/views/shops/Detail.vue`
- **功能**: 
  - 展示商家完整信息
  - 显示商家绑定的标签
  - 显示该商家的点评列表（链接到点评管理）
  - 显示该商家的订单列表（链接到订单管理）
  - 编辑按钮（跳转到编辑页）
- **API 调用**: 
  - `GET /api/shops/{id}`
  - `GET /api/shops/{id}/tags`
- **必需**: ✅

### 3.3 新增商家页 (`/shops/create`)
- **路径**: `src/views/shops/Create.vue`
- **功能**: 
  - 表单填写商家信息：
    - 商家名称（必填）
    - 分类（必填）
    - 地址（必填）
    - 经度/纬度（可选）
    - 人均价格（可选）
  - 提交创建
- **API 调用**: `POST /api/shops`
- **必需**: ✅

### 3.4 编辑商家页 (`/shops/:id/edit`)
- **路径**: `src/views/shops/Edit.vue`
- **功能**: 
  - 加载现有商家信息
  - 支持部分字段更新
  - 可更新状态（正常/下线）
- **API 调用**: 
  - `GET /api/shops/{id}` (加载数据)
  - `PUT /api/shops/{id}` (更新)
- **必需**: ✅

### 3.5 商家标签管理页 (`/shops/:id/tags`)
- **路径**: `src/views/shops/Tags.vue`
- **功能**: 
  - 显示当前商家已绑定的标签
  - 可选择标签进行绑定（覆盖式）
  - 标签选择器（支持按类型筛选：shop）
- **API 调用**: 
  - `GET /api/shops/{id}/tags` (查询已绑定标签)
  - `GET /api/tags?type=shop` (获取可选的商家标签)
  - `POST /api/shops/{id}/tags` (绑定标签)
- **必需**: ⭐ 推荐

---

## 💬 4. 点评管理模块

### 4.1 点评列表页 (`/reviews`)
- **路径**: `src/views/reviews/List.vue`
- **功能**: 
  - 点评列表展示（表格/卡片形式）
  - 支持分页
  - 筛选功能：
    - 按商家筛选（shopId）
    - 按评分筛选（rating: 1-5）
    - 按状态筛选（status: 1正常/0屏蔽）
    - 按是否 AI 生成筛选（isAiGenerated）
  - 显示字段：
    - 商家名称（链接到商家详情）
    - 用户ID
    - 评分（星级显示）
    - 点评内容（截断显示）
    - 图片（缩略图）
    - 点赞数
    - 是否 AI 生成
    - 创建时间
  - 操作按钮：
    - 查看详情
    - 屏蔽/恢复（更新 status）
- **API 调用**: 
  - `GET /api/shops/{shopId}/reviews?page=0&size=10` (需要遍历商家或后端提供全量查询接口)
  - 注意：后端目前只提供按商家查询，可能需要前端循环调用或后端新增全量查询接口
- **必需**: ✅

### 4.2 点评详情页 (`/reviews/:id`)
- **路径**: `src/views/reviews/Detail.vue`
- **功能**: 
  - 展示点评完整信息
  - 显示图片（大图预览）
  - 显示关联的商家信息（链接）
  - 显示用户信息（如果后端提供用户查询接口）
  - 操作按钮：
    - 屏蔽/恢复
    - 删除（如果后端提供删除接口）
- **API 调用**: 
  - 需要后端提供 `GET /api/reviews/{id}` 接口，或通过商家ID+点评ID查询
- **必需**: ⭐ 推荐（如果后端有详情接口）

---

## 📦 5. 订单管理模块

### 5.1 订单列表页 (`/orders`)
- **路径**: `src/views/orders/List.vue`
- **功能**: 
  - 订单列表展示（表格形式）
  - 筛选功能：
    - 按商家筛选（shopId）
    - 按用户筛选（userId，如果后端提供）
    - 按时间范围筛选
  - 显示字段：
    - 订单ID
    - 商家名称（链接到商家详情）
    - 用户ID
    - 消费金额
    - 到店时间
    - 消费项明细
    - 创建时间
  - 操作按钮：
    - 查看详情
- **API 调用**: 
  - `GET /api/shops/{shopId}/orders` (按商家查询)
  - 注意：后端目前只提供按商家查询，可能需要前端循环调用或后端新增全量查询接口
- **必需**: ✅

### 5.2 订单详情页 (`/orders/:id`)
- **路径**: `src/views/orders/Detail.vue`
- **功能**: 
  - 展示订单完整信息
  - 显示消费项明细（JSON 解析展示）
  - 显示关联的商家信息（链接）
- **API 调用**: 
  - 需要后端提供 `GET /api/orders/{id}` 接口，或通过商家ID+订单ID查询
- **必需**: ⭐ 推荐（如果后端有详情接口）

---

## 🏷️ 6. 标签管理模块

### 6.1 标签列表页 (`/tags`)
- **路径**: `src/views/tags/List.vue`
- **功能**: 
  - 标签列表展示（表格形式）
  - 筛选功能：
    - 按类型筛选（type: user/shop/review）
  - 显示字段：
    - 标签ID
    - 标签名称
    - 标签类型
    - 创建时间
  - 操作按钮：
    - 编辑（如果后端提供更新接口）
    - 删除（如果后端提供删除接口）
- **API 调用**: `GET /api/tags?type=shop` (或 user/review)
- **必需**: ✅

### 6.2 新增标签页 (`/tags/create`)
- **路径**: `src/views/tags/Create.vue`
- **功能**: 
  - 表单填写标签信息：
    - 标签名称（必填）
    - 标签类型（必填，选择：user/shop/review）
  - 提交创建
- **API 调用**: `POST /api/tags`
- **必需**: ✅

---

## 👥 7. 用户管理模块

### 7.1 用户列表页 (`/users`)
- **路径**: `src/views/users/List.vue`
- **功能**: 
  - 用户列表展示（表格形式）
  - 搜索功能（手机号/邮箱）
  - 显示字段：
    - 用户ID
    - 手机号/邮箱
    - 注册时间
    - 用户标签（如果后端提供查询接口）
  - 操作按钮：
    - 查看详情
    - 管理标签
- **API 调用**: 
  - 注意：后端目前没有提供用户列表查询接口，可能需要后端新增 `GET /api/users` 接口
- **必需**: ⚠️ 待后端补充接口

### 7.2 用户详情页 (`/users/:id`)
- **路径**: `src/views/users/Detail.vue`
- **功能**: 
  - 展示用户完整信息
  - 显示用户绑定的标签
  - 显示用户的订单列表
  - 显示用户的点评列表
- **API 调用**: 
  - 需要后端提供 `GET /api/users/{id}` 接口
  - `GET /api/users/{id}/tags` (查询用户标签)
  - `GET /api/users/{id}/orders` (查询用户订单)
  - `GET /api/users/{id}/reviews` (查询用户点评，如果后端提供)
- **必需**: ⚠️ 待后端补充接口

### 7.3 用户标签管理页 (`/users/:id/tags`)
- **路径**: `src/views/users/Tags.vue`
- **功能**: 
  - 显示当前用户已绑定的标签
  - 可选择标签进行绑定（覆盖式）
  - 标签选择器（支持按类型筛选：user）
- **API 调用**: 
  - `GET /api/users/{id}/tags` (查询已绑定标签)
  - `GET /api/tags?type=user` (获取可选的用户标签)
  - `POST /api/users/{id}/tags` (绑定标签)
- **必需**: ⚠️ 待后端补充接口（目前只有 `/api/users/me/tags`，需要管理员可管理其他用户的标签）

---

## 🤖 8. AI 调用日志模块

### 8.1 AI 调用日志列表页 (`/ai-logs`)
- **路径**: `src/views/ai-logs/List.vue`
- **功能**: 
  - AI 调用日志列表展示（表格形式）
  - 筛选功能：
    - 按调用类型筛选（type: generate/recommend）
    - 按状态筛选（status: 1成功/0失败）
    - 按用户筛选（userId）
    - 按时间范围筛选
  - 显示字段：
    - 日志ID
    - 用户ID
    - 调用类型
    - 耗时（ms）
    - 状态（成功/失败）
    - 创建时间
  - 操作按钮：
    - 查看详情（显示 Prompt 和响应）
- **API 调用**: 
  - 需要后端提供 `GET /api/ai-logs` 查询接口
- **必需**: ⚠️ 待后端补充接口

---

## 📁 目录结构建议

```
Vue/src/views/
├── auth/
│   └── Login.vue                    # 登录页
├── dashboard/
│   └── Index.vue                    # 仪表盘
├── shops/
│   ├── List.vue                     # 商家列表
│   ├── Detail.vue                   # 商家详情
│   ├── Create.vue                   # 新增商家
│   ├── Edit.vue                     # 编辑商家
│   └── Tags.vue                     # 商家标签管理
├── reviews/
│   ├── List.vue                     # 点评列表
│   └── Detail.vue                   # 点评详情（可选）
├── orders/
│   ├── List.vue                     # 订单列表
│   └── Detail.vue                   # 订单详情（可选）
├── tags/
│   ├── List.vue                     # 标签列表
│   └── Create.vue                   # 新增标签
├── users/
│   ├── List.vue                     # 用户列表（待后端接口）
│   ├── Detail.vue                   # 用户详情（待后端接口）
│   └── Tags.vue                     # 用户标签管理（待后端接口）
└── ai-logs/
    └── List.vue                     # AI调用日志（待后端接口）
```

---

## 🎯 优先级建议

### 第一阶段（核心功能，必须实现）
1. ✅ 登录页面
2. ✅ 仪表盘
3. ✅ 商家管理（列表、详情、新增、编辑）
4. ✅ 点评列表
5. ✅ 订单列表
6. ✅ 标签管理（列表、新增）

### 第二阶段（增强功能，推荐实现）
7. ⭐ 商家标签管理
8. ⭐ 点评详情页
9. ⭐ 订单详情页

### 第三阶段（扩展功能，待后端补充接口）
10. ⚠️ 用户管理（需要后端提供用户列表查询接口）
11. ⚠️ AI 调用日志（需要后端提供查询接口）
12. ⚠️ 点评全量查询接口（目前只能按商家查询）

---

## 📝 注意事项

1. **接口限制**：
   - 点评和订单目前只能按商家查询，如果需要全量列表，建议后端新增 `GET /api/reviews` 和 `GET /api/orders` 接口
   - 用户管理相关接口需要后端补充

2. **权限控制**：
   - 所有管理端接口都需要 JWT 认证
   - 前端需要在请求头中添加 `Authorization: Bearer <token>`

3. **路由守卫**：
   - 需要实现路由守卫，未登录用户跳转到登录页
   - 登录后跳转到仪表盘

4. **API 封装**：
   - 建议在 `src/api/` 目录下按模块封装 API 调用函数
   - 统一处理错误响应和 token 刷新

5. **状态管理**：
   - 建议使用 Vuex/Pinia 管理用户登录状态、token 等全局状态

